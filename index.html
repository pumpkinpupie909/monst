<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>モンスト適正クエスト検索</title>
<style>
body {
  background: #001a2e;
  color: white;
  font-family: "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
  text-align: center;
  padding: 20px;
}

/* 属性ボタン */
.element-row {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin-bottom: 16px;
}
.element-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background-size: cover;
  background-position: center;
  cursor: pointer;
  transition: transform 0.15s ease, filter 0.15s ease;
  filter: brightness(50%);
}
.element-btn:hover { transform: scale(1.08); }
.element-btn.selected {
  filter: brightness(100%);
  transform: scale(1.1);
}
.element-all  { background-image: url('ability_z.png'); }
.element-fire { background-image: url('ability_f.png'); }
.element-water{ background-image: url('ability_w.png'); }
.element-wood { background-image: url('ability_t.png'); }
.element-light{ background-image: url('ability_r.png'); }
.element-dark { background-image: url('ability_d.png'); }

/* アビリティ */
.ability-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 6px 8px;
  justify-items: center;
  align-items: center;
  max-width: 400px;
  margin: 0 auto;
}
.ability-row-bottom {
  display: flex;
  justify-content: center;
  gap: 0;
  margin-top: 8px;
}
.ability-btn {
  width: 130px;
  height: 36px;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  cursor: pointer;
  transition: transform 0.1s ease;
}
.ability-btn:hover { transform: scale(1.05); }
.ability-btn:active { transform: scale(0.95); }

/* 押す前 */
#AGB { background-image: url('AGB_off.png'); }
#ADW { background-image: url('ADW_off.png'); }
#AW  { background-image: url('AW_off.png'); }
#MS  { background-image: url('MS_off.png'); }
#AB  { background-image: url('AB_off.png'); }
#AWI { background-image: url('AWI_off.png'); }
#AM  { background-image: url('AM_off.png'); }
#AGK { background-image: url('AGK_off.png'); }
#AT  { background-image: url('AT_off.png'); }
#AGY { background-image: url('AGY_off.png'); }
#H   { background-image: url('H_off.png'); }
#K   { background-image: url('K_off.png'); }

/* 押した後 */
#AGB.selected { background-image: url('AGB_on.png'); }
#ADW.selected { background-image: url('ADW_on.png'); }
#AW.selected  { background-image: url('AW_on.png'); }
#MS.selected  { background-image: url('MS_on.png'); }
#AB.selected  { background-image: url('AB_on.png'); }
#AWI.selected { background-image: url('AWI_on.png'); }
#AM.selected  { background-image: url('AM_on.png'); }
#AGK.selected { background-image: url('AGK_on.png'); }
#AT.selected  { background-image: url('AT_on.png'); }
#AGY.selected { background-image: url('AGY_on.png'); }
#H.selected   { background-image: url('H_on.png'); }
#K.selected   { background-image: url('K_on.png'); }

/* 決定・リセット */
.button-row {
  display: flex;
  justify-content: center;
  gap: 40px;
  margin-top: 24px;
}
.action-btn {
  width: 120px;
  height: 45px;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  cursor: pointer;
  transition: transform 0.15s ease;
}
.action-btn:hover { transform: scale(1.05); }
#resetBtn { background-image: url('reset.png'); }
#searchBtn { background-image: url('kettei.png'); }

/* 結果 */
#results {
  margin-top: 30px;
  text-align: left;
  max-width: 600px;
  margin-inline: auto;
}
.result-item {
  background: rgba(255,255,255,0.1);
  padding: 10px 14px;
  margin-bottom: 8px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s;
}
.result-item:hover {
  background: rgba(255,255,255,0.2);
}

/* ポップアップ */
#popup {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #223;
  padding: 20px;
  border-radius: 12px;
  width: 80%;
  max-width: 500px;
  box-shadow: 0 0 15px rgba(0,0,0,0.5);
}
#popup h3 { margin-top: 0; }
#popup p { white-space: pre-line; }
#popup a { color: #4fc3f7; }
#closePopup {
  position: absolute;
  top: 8px;
  right: 12px;
  cursor: pointer;
  font-weight: bold;
  font-size: 18px;
}
</style>
</head>
<body>

<h2>モンスト適正クエスト検索</h2>

<!-- 属性 -->
<div class="element-row">
  <div class="element-btn element-all selected"  data-element="全"></div>
  <div class="element-btn element-fire"  data-element="火"></div>
  <div class="element-btn element-water" data-element="水"></div>
  <div class="element-btn element-wood"  data-element="木"></div>
  <div class="element-btn element-light" data-element="光"></div>
  <div class="element-btn element-dark"  data-element="闇"></div>
</div>

<!-- アビリティ -->
<div class="ability-grid">
  <div class="ability-btn" id="AGB" title="重力バリア"></div>
  <div class="ability-btn" id="ADW" title="ダメージウォール"></div>
  <div class="ability-btn" id="AW"  title="ワープ"></div>
  <div class="ability-btn" id="MS"  title="マインスイーパー/飛行"></div>
  <div class="ability-btn" id="AB"  title="ブロック"></div>
  <div class="ability-btn" id="AWI" title="ウィンド"></div>
  <div class="ability-btn" id="AM"  title="魔法陣/ブースト"></div>
  <div class="ability-btn" id="AGK" title="減速壁"></div>
  <div class="ability-btn" id="AT"  title="転送壁"></div>
  <div class="ability-btn" id="AGY" title="減速床"></div>
</div>
<div class="ability-row-bottom">
  <div class="ability-btn" id="H" title="反射"></div>
  <div class="ability-btn" id="K" title="貫通"></div>
</div>

<!-- ボタン -->
<div class="button-row">
  <div class="action-btn" id="resetBtn"></div>
  <div class="action-btn" id="searchBtn"></div>
</div>

<!-- 検索結果 -->
<div id="results"></div>

<!-- ポップアップ -->
<div id="popup">
  <div id="closePopup">×</div>
  <h3 id="popupTitle"></h3>
  <p id="popupDesc"></p>
  <a id="popupURL" href="#" target="_blank">▶攻略サイトへ</a>
</div>

<script>
const elementButtons = document.querySelectorAll('.element-btn');
const abilityButtons = document.querySelectorAll('.ability-btn');
const results = document.getElementById('results');
const popup = document.getElementById('popup');
const popupTitle = document.getElementById('popupTitle');
const popupDesc = document.getElementById('popupDesc');
const popupURL = document.getElementById('popupURL');
const closePopup = document.getElementById('closePopup');

// 属性ボタン（1つだけ選択）
elementButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    elementButtons.forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');
  });
});

// アビリティ（複数選択可）
abilityButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    btn.classList.toggle('selected');
  });
});

// クエストデータ例
const quests = [
  {name:"天魔の孤城試練１", element:"水", require:["重力バリア","ワープ","マインスイーパー/飛行","反射"],description:"雑魚：幻獣・神・魔族\nボス：神\n \n感染毒があるので異常状態回復系が有利",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/354183"},
    {name:"天魔の孤城試練２", element:"木", require:["ダメージウォール","マインスイーパー/飛行","魔法陣","反射"],description:"雑魚：サムライ・ドラゴン\nボス：サムライ",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/354184"},
    {name:"天魔の孤城試練３", element:"火", require:["ダメージウォール","マインスイーパー/飛行","魔法陣","貫通"],description:"雑魚：神・魔族・幻獣\nボス；神\n \n個別HPなのである程度対応していなくても攻略可",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/354185"},
    {name:"天魔の孤城試練４", element:"光", require:["マインスイーパー/飛行","減速壁","反射"],description:"雑魚：神\nボス：神\n　\nブロックがあるとやりやすい",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/354186"},
　　{name:"天魔の孤城試練５", element:"闇", require:["重力バリア","ダメージウォール","貫通"],description:"雑魚：サムライ・魔王・魔人・獣\nボス：サムライ\n　\n友情コンボ禁止",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/354187"},
　　{name:"天魔の孤城試練６", element:"水", require:["重力バリア","減速壁","反射"],description:"雑魚：ロボット・魔王・妖精・神\nボス：聖騎士\n　\nウィンドなしキャラを入れる場合、守護獣麻痺必須",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/354188"},
　　{name:"天魔の孤城試練７", element:"木", require:["転送壁"],description:"雑魚：幻獣・妖精\nボス：亜人\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/354190"},
　　{name:"天魔の孤城試練８", element:"火", require:["ワープ","減速壁"],description:"雑魚：幻獣・魔族\nボス：魔族\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/354191"},
    {name:"天魔の孤城試練９", element:"光", require:["重力バリア","転送壁"],description:"雑魚：神・ロボット・ユニバース\nボス：神\n\nラウドラバリアあり\n反射推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/354192"},
　　{name:"天魔の孤城試練１０", element:"水", require:["重力バリア","ダメージウォール","貫通"],description:"雑魚：神・侍・聖騎士・魔族\nボス：聖騎士\n\n34手以内クリアでアーキレット出現確率UP",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/354193"},
    {name:"天魔の孤城試練EXアーキレット", element:"all", require:["重力バリア","マインスイーパー/飛行","ブロック","魔法陣"],description:"雑魚：幻獣・聖騎士・魔族・ユニバース・ロボット・魔族\nボス：神\n\n試練10を34手以内クリアで出現確率UP",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/354437"},
　　{name:"天魔の孤城空中庭園１", element:"闇", require:["ダメージウォール","マインスイーパー/飛行","ブロック","反射"],description:"雑魚：幻獣・魔族・魔王\nボス：亜人\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/434250"},
　　{name:"天魔の孤城空中庭園２", element:"光", require:["ダメージウォール","ブロック","転送壁"],description:"雑魚：魔族・幻獣\nボス：魔王\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/434251"},
　　{name:"天魔の孤城空中庭園３", element:"水", require:["ダメージウォール","マインスイーパー/飛行","重力バリア"],description:"雑魚：魔族・幻獣・魔人\nボス：魔人\n\nゲージ攻撃を削れるので兵命削り推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/434253"},
　　{name:"天魔の孤城空中庭園４", element:"火", require:["重力バリア","マインスイーパー/飛行","ワープ","反射"],description:"雑魚：妖精、魔族、幻獣、ロボット\nボス：魔人\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/434254"},
　　{name:"天魔の孤城空中庭園５", element:"木", require:["貫通","ブロック","魔法陣","減速壁"],description:"雑魚：魔人・幻獣・ロボット\nボス：魔人\n\nHPが多いほど攻撃力UP",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/434256"},
　　{name:"天魔の孤城空中庭園６", element:"闇", require:["ワープ","減速壁","貫通"],description:"雑魚：幻獣、ドラゴン\nボス：ユニバース\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/434257"},
　　{name:"天魔の孤城空中庭園７", element:"光", require:["ダメージウォール","重力バリア","ブロック"],description:"雑魚：サムライ・鉱物\nボス：ロボット\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/434258"},
　　{name:"天魔の孤城空中庭園８", element:"水", require:["重力バリア","魔法陣","転送壁","反射"],description:"雑魚：幻獣・聖騎士・神・ドラゴン・ロボット\nボス：幻獣\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/434259"},
　　{name:"天魔の孤城空中庭園９", element:"火", require:["減速壁","マインスイーパー/飛行","ブロック","反射"],description:"雑魚：聖騎士・鉱物・魔人・ドラゴン\nボス：幻獣\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/434260"},
    {name:"天魔の孤城空中庭園１０", element:"all", require:["転送壁","マインスイーパー/飛行","反射"],description:"雑魚：妖精・神・ドラゴン・幻獣・ロボット・獣・聖騎士・サムライ\nボス：聖騎士\n\n低確率でコルティーナ出現",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/434261"},
    {name:"天魔の孤城空中庭園EXコルティーナ", element:"光", require:["ワープ","重力バリア","貫通"],description:"雑魚：幻獣・魔族・聖騎士・ユニバース\nボス：\n\n庭園１から3敗以内？で出現確率UP",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/434308"},
    {name:"黎絶アレスター", element:"水", require:["ワープ","マインスイーパー/飛行","ブロック"],description:"雑魚：ロボット・ユニバース・魔族・魔王・幻妖（マグマ雑魚）\nボス：幻妖\n\n反射推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/450293"},
　　{name:"黎絶アジテーター", element:"木", require:["転送壁","ワープ"],description:"雑魚：幻妖（花人間）・亜人（パピー吠崎）\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/438419"},
　　{name:"黎絶ロヴァー", element:"火", require:["転送壁"],description:"雑魚：鉱物・魔族・妖精・ロボット・幻妖（ランプ）\nボス：幻妖\n\nゲージキャラ非推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/431826"},
　　{name:"黎絶フォーサー", element:"闇", require:["マインスイーパー/飛行","減速壁","貫通"],description:"雑魚：幻獣・ドラゴン・ロボット・妖精（スーフー）\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/423304"},
　　{name:"黎絶エンベズラー", element:"光", require:["ワープ","転送壁"],description:"雑魚：魔族・ユニバース・サムライ\nボス：幻妖\n\n反射と貫通両方編成推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/455943"},
　　{name:"黎絶アブピッシャー", element:"水", require:["マインスイーパー/飛行","転送壁","反射"],description:"雑魚：幻獣・ロボット・妖精・魔族・鉱物\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/464339"},
　　{name:"黎絶デティアカル", element:"木", require:["ダメージウォール","マインスイーパー/飛行","転送壁"],description:"雑魚：魔族・ロボット・ドラゴン\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/488783"},
　　{name:"黎絶コディエゴス", element:"火", require:["ワープ","マインスイーパー/飛行","減速壁"],description:"雑魚：ロボット・魔族・ドラゴン・神\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/496752"},
　　{name:"黎絶ビリミスク", element:"闇", require:["ワープ","ブロック","転送壁"],description:"雑魚：魔族・サムライ・ドラゴン・獣・幻妖\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/469888"},
　　{name:"黎絶ペグイル", element:"光", require:["マインスイーパー/飛行","ブロック","魔法陣","貫通"],description:"雑魚：幻獣・魔族・妖精・聖騎士\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/480637"},
　　{name:"黎絶プロポバテ", element:"木", require:["減速壁","転送壁","反射"],description:"雑魚：魔人・幻獣・ドラゴン\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/506480"},
    {name:"黎絶コポルネス", element:"水", require:["ワープ","減速床"],description:"雑魚：魔族・幻獣\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/519110"},
    {name:"黎絶キャローネ", element:"光", require:["ワープ","ブロック","マインスイーパー/飛行","反射"],description:"雑魚：幻獣・魔族・ユニバース・妖精・神\nボス：幻妖\n\nボスが魔王キラーMを持っているので注意\n一部の敵は地雷倍率が上がっているので飛行×",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/527238"},
    {name:"轟絶ダウト", element:"木", require:["重力バリア","減速壁","反射"],description:"雑魚：幻獣・魔族・ロボット・亜人\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/293626"},
　　{name:"轟絶ハービセル", element:"木", require:["重力バリア","マインスイーパー/飛行","反射"],description:"雑魚：ユニバース・幻獣・魔王・アクシス\nボス：幻妖\n\nラックスキル「クリティカル」必須",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/381456"},
　　{name:"轟絶ハナレコグニ", element:"木", require:["ダメージウォール","ワープ",],description:"雑魚：魔族・妖精・幻獣\nボス：幻妖\n\nウィンド持ち推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/406505"},
　　{name:"轟絶カカゴセデク", element:"火", require:["ワープ","転送壁","反射"],description:"雑魚：神・魔族・ロボット\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/446434"},
　　{name:"轟絶ペディオ", element:"光", require:["ブロック","減速壁","貫通"],description:"雑魚：幻獣・獣・魔族・ユニバース\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/468949"},
　　{name:"轟絶スケアトラ", element:"火", require:["重力バリア","マインスイーパー/飛行","ブロック"],description:"雑魚：神・魔族\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/500125"},
　　{name:"轟絶オーポレン", element:"闇", require:["ダメージウォール","ワープ","ブロック","減速壁","反射"],description:"雑魚：幻獣・魔族・ロボット\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/492472"},
　　{name:"轟絶アンコルウ", element:"光", require:["ブロック","魔法陣","転送壁","反射"],description:"雑魚：幻獣・ロボット・ユニバース\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/513048"},
    {name:"轟絶サバイール", element:"水", require:["重力バリア","魔法陣","ダメージウォール","貫通"],description:"雑魚：幻獣・妖精・聖騎士・幻妖\nボス：幻妖\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/524468"},
    {name:"爆絶ホラー", element:"火", require:["マインスイーパー/飛行","ウィンド"],description:"雑魚：魔族・幻獣\nボス：亜人\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/514346"},
    {name:"爆絶アアル", element:"闇", require:["ダメージウォール","ワープ","反射","ブロック"],description:"雑魚：神・魔族・幻獣・獣\nボス：獣\n\n反射編成必須",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/387114"},
　　{name:"EXリズム", element:"光", require:["減速床"],description:"雑魚：魔族・亜人・ロボット\nボス：亜人\n\nダメージウォールとロックオン地雷が展開されるが、雑魚処理できれば展開されないので対策していなくても問題ない",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/504985"},
    {name:"EXネッテキシ", element:"木", require:["ダメージウォール","マインスイーパー/飛行","減速壁"],description:"雑魚：ロボット・幻獣・魔族\nボス：魔人\n\n貫通推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/461556"},
　　{name:"EX涅槃寂静", element:"火", require:["魔法陣","貫通","ダメージウォール","ワープ","マインスイーパー/飛行"],description:"雑魚：幻獣・ドラゴン・ユニバース\nボス：魔王\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/344600"},
　　{name:"禁忌深淵火", element:"水", require:["ダメージウォール","ワープ","マインスイーパー/飛行","貫通"],description:"雑魚：魔族・幻獣・神・魔王・ユニバース\nボス：魔人\n\n伝染霧対策必須\n兵命削り推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/404307"},
　　{name:"禁忌深淵水", element:"木", require:["重力バリア","ワープ","マインスイーパー/飛行","反射"],description:"雑魚：幻獣・魔人・サムライ・魔族・妖精\nボス：魔王族\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/404308"},
　　{name:"禁忌深淵木", element:"火", require:["重力バリア","ダメージウォール","マインスイーパー/飛行"],description:"雑魚：幻獣・神・魔族・魔人\nボス：魔王\n\n反射と貫通２体ずつ編成推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/404309"},
　　{name:"禁忌深淵闇", element:"光", require:["重力バリア","マインスイーパー/飛行","貫通"],description:"雑魚：ロボット・ドラゴン・魔族\nボス：魔王\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/404311"},
　　{name:"禁忌深淵光", element:"闇", require:["ワープ","転送壁","貫通"],description:"雑魚：幻獣・ユニバース・神\nボス：魔王\n\nヴィシュヌが魔族キラーLを持っているので注意",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/404310"},
　　{name:"パライソの星墓", element:"火", require:["ダメージウォール","ワープ","マインスイーパー/飛行","反射"],description:"雑魚：幻獣・鉱物・魔族・獣・妖精\nボス：鉱物\n\nHWマスターと窮地の活路推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/511455"},
　　{name:"黄泉の星墓", element:"光", require:["重力バリア","ダメージウォール","マインスイーパー/飛行"],description:"雑魚：魔族・ロボット・魔王・サムライ\nボス：魔人\n\n反射と貫通交互に編成推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/511456"},
　　{name:"ティルナノーグの星墓", element:"木", require:["重力バリア","ダメージウォール","減速壁","貫通"],description:"雑魚：幻獣・妖精・ロボット・聖騎士\nボス：妖精\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/511457"},
　　{name:"アアルの星墓", element:"闇", require:["ワープ","ウィンド","減速床"],description:"雑魚：魔族\nボス：獣\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/511458"},
　　{name:"アヴァロンの星墓", element:"水", require:["マインスイーパー/飛行","ブロック","減速壁","貫通"],description:"雑魚：魔族・幻獣・ロボット・聖騎士・妖精\nボス：聖騎士\n\n地雷による攻撃力アップがあるので飛行×",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/511459"},
　　{name:"シャンバラの星墓", element:"火", require:["ダメージウォール","ワープ","減速壁","貫通"],description:"雑魚：幻獣・神・ドラゴン\nボス：鳥\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/511460"},
　　{name:"アポカリプスの星墓", element:"光", require:["重力バリア","ワープ","減速壁","貫通"],description:"雑魚：幻獣、魔族、ロボット\nボス：魔王\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/511461"},
　　{name:"アラミタマの星墓", element:"木", require:["ダメージウォール","マインスイーパー/飛行","ウィンド","反射"],description:"雑魚：幻獣・妖精・魔族\nボス：魔人\n\n木属性と火属性を2体づつ編成推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/511462"},
　　{name:"アラミタマの星墓", element:"火", require:["ダメージウォール","マインスイーパー/飛行","ウィンド","反射"],description:"雑魚：幻獣・妖精・魔族\nボス：魔人\n\n木属性と火属性を2体づつ編成推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/511462"},
　　{name:"ラブの星墓", element:"闇", require:["減速壁","転送壁","反射"],description:"雑魚：神・魔族・幻獣\nボス：亜人\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/511463"},
　　{name:"パラノヴィアの星墓", element:"all", require:["ダメージウォール","ワープ","魔法陣","減速壁","反射"],description:"雑魚：幻獣・魔族・神・ドラゴン・ロボット\n中ボス：ユニバース・魔王・幻獣・聖騎士\nボス：ユニバース\n\n運極編成でアムネディア降臨確率UP",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/511464"},
　　{name:"破壊の星墓EXアムネディア", element:"火", require:["重力バリア","魔法陣","ウィンド","貫通"],description:"雑魚：幻獣・ドラゴン\nボス：ユニバース\n\nパラノヴィアを運極を入れてクリアで確率UP",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/512381"},
    {name:"超究極・傑チェルノボグ", element:"闇", require:["減速床","貫通"],description:"雑魚：幻獣・獣・妖精\nボス：亜人\n\nマインスイーパー編成必須\n貫通推奨",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/519111"},
    {name:"未開の砂丘拠点２２", element:"木", require:["重力バリア","ダメージウォール","ブロック","反射"],description:"雑魚：亜人・幻獣・サムライ・ユニバース\nボス：ユニバース\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/522737"},
    {name:"超究極イザナミ", element:"水", require:["ブロック","魔法陣","ウィンド",],description:"雑魚：魔族・ドラゴン・妖精・鉱物・ロボット・神\n中ボス：亜人・聖騎士\nボス：神\n\n",url:"https://xn--eckwa2aa3a9c8j8bve9d.gamewith.jp/article/show/524447"},
    /*テンプレ   {name:"", element:"", require:["","","",],description:"雑魚：\nボス：\n\n",url:""},   */
];

// リセット
document.getElementById('resetBtn').addEventListener('click', () => {
  elementButtons.forEach(b => b.classList.remove('selected'));
  document.querySelector('.element-all').classList.add('selected');
  abilityButtons.forEach(b => b.classList.remove('selected'));
  results.innerHTML = '';
});

// 検索
document.getElementById('searchBtn').addEventListener('click', () => {
  const selectedElement = document.querySelector('.element-btn.selected')?.dataset.element || "全";
  const selectedAbilities = Array.from(document.querySelectorAll('.ability-btn.selected')).map(b => b.title);
  
  const matched = quests.filter(q => {
    const elementMatch = (selectedElement === "全" || q.element === selectedElement);
    // ✅ 「クエストのrequireが、選択アビリティの中に全部含まれている」ならマッチ
    const abilityMatch = q.require.every(req => selectedAbilities.includes(req));
    return elementMatch && abilityMatch;
  });

  results.innerHTML = matched.length ? 
    matched.map(q => `<div class="result-item" data-name="${q.name}">${q.name}</div>`).join('')
    : '<p>該当するクエストはありません。</p>';

  // 結果クリックでポップ表示
  document.querySelectorAll('.result-item').forEach(item => {
    item.addEventListener('click', () => {
      const quest = quests.find(q => q.name === item.dataset.name);
      popupTitle.textContent = quest.name;
      popupDesc.textContent = quest.description;
      popupURL.href = quest.url;
      popup.style.display = 'block';
    });
  });
});

// ポップを閉じる
closePopup.addEventListener('click', () => popup.style.display = 'none');
</script>

</body>
</html>
